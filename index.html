<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>FridgeMind ‚Äî Dashboard</title>
<style>
:root{
  --bg:#dff6ff; --btn-pink:#ffb6c1; --btn-delete:#e94b3c;
  --card:#fff; --shadow:0 4px 14px rgba(0,0,0,0.08); --warn-bg:#ffd1dc;
}
body{
  margin:0; font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:var(--bg); color:#333; display:flex; min-height:100vh;
}
.sidebar{
  width:220px; background:#cfe0ff; padding:20px; display:flex; flex-direction:column; gap:14px; border-right:1px solid #aaa;
}
.sidebar button{ background:var(--btn-pink); color:#fff; border:none; padding:10px; border-radius:12px; cursor:pointer; font-weight:600; }
.sidebar button.delete-btn{ background:var(--btn-delete); }
.sidebar h2{ margin-top:0; font-size:18px; color:#333; }
.main{ flex:1; padding:24px; }
h1{ text-align:center; margin:6px 0 18px; color:#333; }
.card{ background:var(--card); border-radius:16px; padding:18px; box-shadow:var(--shadow); margin-bottom:20px; }
.row{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
input[type="text"], input[type="date"]{
  padding:10px 12px; border-radius:12px; border:1px solid #f3dbe2; font-size:14px; flex:1;
}
.items{ margin-top:16px; display:flex; flex-direction:column; gap:10px; }
.item-card{ background:#fff; border-radius:12px; padding:12px; box-shadow:0 2px 8px rgba(0,0,0,.05); display:flex; justify-content:space-between; align-items:flex-start; gap:12px; flex-wrap:wrap; }
.info{ display:flex; flex-direction:column; gap:6px; min-width:220px; }
.name{ font-weight:700; font-size:15px; }
.expiry{ color:#666; font-size:14px; }
.badge{ background:var(--warn-bg); color:#9b1b2b; padding:4px 10px; border-radius:999px; font-weight:700; font-size:12px; }
.suggest{ font-size:13px; color:#666; font-style:italic; }
.used-btn{ background:var(--btn-pink); color:#fff; border-radius:999px; padding:8px 14px; border:none; cursor:pointer; margin-left:6px; }
.delete-btn{ background:var(--btn-delete); color:#fff; border-radius:999px; padding:8px 14px; border:none; cursor:pointer; margin-left:6px; }
.toast{ position:fixed; left:50%; transform:translateX(-50%); bottom:20px; background:#222; color:#fff; padding:8px 14px; border-radius:999px; font-size:13px; z-index:999; }
</style>
</head>
<body>

<div class="sidebar">
  <h2>üè† Dashboard</h2>
  <button onclick="showSection('home')">Home</button>
  <button onclick="showSection('categories')">ü•õ Categories</button>
  <button onclick="showSection('near')">‚ö†Ô∏è Near Expiry</button>
  <button onclick="showSection('recipes')">üç≥ Recipes</button>
  <button onclick="showSection('trash')">üóëÔ∏è Trash</button>
  <button onclick="testNotification()">üîî Test Notification</button>
</div>

<div class="main">
  <h1>ü•ï FridgeMind ‚Äî Track Items</h1>

  <div id="home" class="card section">
    <div style="display:flex;gap:10px;flex-direction:column;">
      <div class="row">
        <input id="itemName" type="text" placeholder="Enter item name üçÖ" />
        <input id="expiryDate" type="date" />
        <button id="addBtn">‚ûï Add</button>
      </div>
      <div class="note small">Manual expiry optional. Automatic expiry detected based on item.</div>
    </div>
  </div>

  <div class="items" id="itemList"></div>
</div>

<audio id="ding" src="https://www.soundjay.com/button/beep-07.mp3"></audio>

<script>
/* Pantry data */
const pantry = {
  "tomato":   { emoji:"üçÖ", recipes:["Tomato Chutney","Tomato Rasam","Tomato Rice"], expiryDays:5 },
  "onion":    { emoji:"üßÖ", recipes:["Onion Chutney","Onion Pakora","Onion Sambar"], expiryDays:7 },
  "potato":   { emoji:"ü•î", recipes:["Aloo Curry","Aloo Paratha","Jeera Aloo"], expiryDays:10 },
  "carrot":   { emoji:"ü•ï", recipes:["Carrot Halwa","Carrot Poriyal"], expiryDays:5 },
  "bread":    { emoji:"üçû", recipes:["Bread Upma","Bread Pakora"], expiryDays:3 },
  "milk":     { emoji:"ü•õ", recipes:["Make Paneer","Kheer"], expiryDays:3 },
  "rice":     { emoji:"üçö", recipes:["Lemon Rice","Curd Rice"], expiryDays:30 },
  "egg":      { emoji:"ü•ö", recipes:["Egg Curry","Egg Bhurji"], expiryDays:7 }
};
const aliases = { "tomatoes":"tomato","potatoes":"potato" };

function normalize(s){ return (s||"").toString().trim().toLowerCase(); }
function findPantryKeyFromLabel(label){
  if(!label) return null;
  const L = normalize(label);
  if(aliases[L]) return aliases[L];
  if(pantry[L]) return L;
  for(const key of Object.keys(pantry)){
    if(L.includes(key)) return key;
  }
  return null;
}

/* UI refs */
const itemNameInput = document.getElementById('itemName');
const expiryInput = document.getElementById('expiryDate');
const addBtn = document.getElementById('addBtn');
const itemList = document.getElementById('itemList');
const ding = document.getElementById('ding');

function showToast(msg){
  const t = document.createElement('div');
  t.className = 'toast';
  t.textContent = msg;
  document.body.appendChild(t);
  setTimeout(()=> t.remove(), 2500);
}

function addItem(){
  let raw = (itemNameInput.value || "").trim();
  if(!raw){ showToast("Enter item name"); return; }
  let keyTry = findPantryKeyFromLabel(raw.toLowerCase()) || null;

  let expiry = expiryInput.value;
  if(!expiry && keyTry) { 
    let d = pantry[keyTry].expiryDays; 
    let dt = new Date(); dt.setDate(dt.getDate() + d); 
    expiry = dt.toISOString().split('T')[0]; 
  }
  if(!expiry){ showToast("Enter expiry date"); return; }

  const dleft = daysUntil(expiry);
  const card = document.createElement('div'); card.className='item-card';

  const info = document.createElement('div'); info.className='info';
  if(dleft <=3){
    const b = document.createElement('div'); b.className='badge';
    b.textContent = `‚ö†Ô∏è Near Expiry (${dleft}d)`; info.appendChild(b);
    playNotification();
  }
  const nameLine = document.createElement('div'); nameLine.className='name';
  nameLine.textContent = raw; info.appendChild(nameLine);

  const expiryLine = document.createElement('div'); expiryLine.className='expiry';
  expiryLine.textContent = `Expiry: ${expiry}`; info.appendChild(expiryLine);

  if(dleft <=3 && keyTry){
    const pool = pantry[keyTry].recipes;
    const pick = pool[Math.floor(Math.random()*pool.length)];
    const link = `https://www.youtube.com/results?search_query=${encodeURIComponent(pick+' recipe')}`;
    const s = document.createElement('div'); s.className='suggest';
    s.innerHTML = `üç≥ Suggestion: <a href="${link}" target="_blank">${pick}</a>`;
    info.appendChild(s);
  }

  const deleteBtn = document.createElement('button'); deleteBtn.className='delete-btn';
  deleteBtn.textContent = 'üóëÔ∏è Delete';
  deleteBtn.addEventListener('click', ()=>{ card.remove(); });

  card.appendChild(info); card.appendChild(deleteBtn);
  itemList.prepend(card);

  itemNameInput.value=''; expiryInput.value='';
}

addBtn.addEventListener('click', addItem);

function daysUntil(dateStr){
  const t = new Date(); const e = new Date(dateStr);
  return Math.ceil((e-t)/(1000*60*60*24));
}

/* Notifications */
function playNotification(){
  ding.currentTime=0; ding.play();
  showToast('‚ö†Ô∏è Item near expiry!');
}

function testNotification(){
  playNotification();
}

/* Sidebar navigation (optional) */
function showSection(name){
  document.querySelectorAll('.section').forEach(s=>s.style.display='none');
  const s = document.getElementById(name);
  if(s) s.style.display='block';
}
</script>
</body>
</html>




