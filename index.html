<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>FridgeMind ‚Äî Dashboard</title>
<style>
:root{
  --bg-main:#E6E6FA; 
  --card:#F7F4FA;
  --pink:#FFB6C1; 
  --pink-gradient: linear-gradient(135deg, #FFB6C1, #FFC0CB);
  --mint:#A8E6CF;
  --red:#FF6B6B;
  --shadow:0 4px 14px rgba(0,0,0,0.08);
  --warn-bg:#FF6B6B;
}
body{
  margin:0; font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background: var(--bg-main); color:#333; padding:0; transition:0.3s;
}
h1{ text-align:center; margin:6px 0 18px; color:#9B59B6; }
.sidebar{
  width:220px; background:#D8BFD8; border-radius:16px; padding:16px; display:flex; flex-direction:column; gap:12px; height:90vh;
  position:fixed; top:20px; left:-240px; transition:0.3s; z-index:10;
}
.sidebar.show{ left:20px; }
.sidebar button{ padding:10px; border:none; border-radius:12px; cursor:pointer; font-weight:600; background:var(--pink); color:#fff; text-align:left; }
.sidebar button.delete{ background:var(--red); }
.submenu{ display:none; flex-direction:column; gap:6px; padding-left:10px; }
.submenu button{ background:var(--mint); color:#333; font-weight:500; }
.main{ flex:1; margin-left:20px; transition:0.3s; }
.main.shift{ margin-left:260px; }
.card{ background:var(--card); border-radius:16px; padding:18px; box-shadow:var(--shadow); margin-bottom:20px; }
.row{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin-bottom:8px; }
input[type="text"], input[type="date"]{
  padding:10px 12px; border-radius:12px; border:1px solid #f3dbe2; font-size:14px; flex:1;
}
button.add-btn{ background:var(--pink); background-image: var(--pink-gradient); color:white; border:none; padding:10px 14px; border-radius:12px; cursor:pointer; font-weight:600; }
button.secondary{ background:var(--mint); color:#333; border:1px solid #f3dbe2; }
button.delete-btn{ background:var(--red); color:#fff; border:none; padding:8px 14px; border-radius:12px; cursor:pointer; font-weight:600; }
button.restore-btn{ background:var(--mint); color:#333; border:none; padding:8px 14px; border-radius:12px; cursor:pointer; font-weight:600; }
button:disabled{ opacity:.6; transform:none; cursor:default; }
.items{ display:flex; flex-direction:column; gap:10px; }
.item-card{ background:#fff; border-radius:12px; padding:12px; box-shadow:0 2px 8px rgba(0,0,0,.05); display:flex; justify-content:space-between; align-items:flex-start; gap:12px; flex-wrap:wrap; }
.info{ display:flex; flex-direction:column; gap:6px; min-width:220px; }
.name{ font-weight:700; font-size:15px; }
.expiry{ color:#666; font-size:14px; }
.badge{ background:var(--warn-bg); color:#fff; padding:4px 10px; border-radius:999px; font-weight:700; font-size:12px; cursor:pointer; }
.suggest{ font-size:13px; color:#666; font-style:italic; }
.toast{ position:fixed; bottom:20px; left:50%; transform:translateX(-50%); background:#222; color:#fff; padding:10px 16px; border-radius:999px; font-size:13px; z-index:999; opacity:0.95; margin-top:6px; animation:fadein 0.3s ease-out; }
@keyframes fadein{ from {opacity:0; transform:translateX(-50%) translateY(10px);} to {opacity:0.95; transform:translateX(-50%) translateY(0);} }
.toggle-menu{ position:fixed; top:20px; left:20px; background:var(--pink); color:#fff; border:none; border-radius:12px; padding:10px 14px; cursor:pointer; font-weight:600; z-index:12; }
#notifBtnTop{ position:fixed; top:20px; right:20px; background:var(--mint); color:#333; border:1px solid #f3dbe2; padding:10px 14px; border-radius:12px; cursor:pointer; font-weight:600; z-index:12; }
</style>
</head>
<body>

<button class="toggle-menu">‚ò∞ Menu</button>
<button id="notifBtnTop">üîî Test Notification</button>

<div class="sidebar" id="sidebar">
  <button id="homeBtn">üè† Home / Dashboard</button>
  <button id="categoriesBtn">ü•õ Categories ‚ñº</button>
  <div class="submenu" id="categorySubmenu">
    <button data-cat="Dairy">Dairy</button>
    <button data-cat="Grains">Grains</button>
    <button data-cat="Vegetables">Vegetables</button>
    <button data-cat="Fruits">Fruits</button>
    <button data-cat="Other">Other</button>
  </div>
  <button id="expiryBtn">‚ö†Ô∏è Near Expiry</button>
  <button id="recipesBtn">üç≥ Recipe Suggestions</button>
  <button id="trashBtn" class="delete">üóëÔ∏è Trash / Deleted Items</button>
</div>

<div class="main" id="mainContent">
  <h1>ü•ï FridgeMind ‚Äî Track Items</h1>

  <div class="card">
    <div class="row">
      <input id="itemName" type="text" placeholder="Enter item name üçÖ" />
      <input id="expiryDate" type="date" />
      <button id="addBtn" class="add-btn">‚ûï Add</button>
    </div>
  </div>

  <div class="items" id="itemList"></div>
</div>

<script>
/* Pantry + Other Items */
const pantry = {
  // Vegetables
  "tomato":{emoji:"üçÖ", recipes:["Tomato Chutney","Tomato Rasam","Tomato Rice"], expiry:7, category:"Vegetables"},
  "onion":{emoji:"üßÖ", recipes:["Onion Chutney","Onion Pakora","Onion Sambar"], expiry:10, category:"Vegetables"},
  "potato":{emoji:"ü•î", recipes:["Aloo Curry","Aloo Paratha","Jeera Aloo"], expiry:14, category:"Vegetables"},
  "carrot":{emoji:"ü•ï", recipes:["Carrot Halwa","Carrot Poriyal"], expiry:7, category:"Vegetables"},
  "beans":{emoji:"ü•¨", recipes:["Beans Poriyal","Beans Curry"], expiry:7, category:"Vegetables"},
  "brinjal":{emoji:"üçÜ", recipes:["Brinjal Curry","Brinjal Poriyal"], expiry:7, category:"Vegetables"},
  "capsicum":{emoji:"üå∂Ô∏è", recipes:["Capsicum Masala","Stuffed Capsicum"], expiry:7, category:"Vegetables"},
  "cabbage":{emoji:"ü•¨", recipes:["Cabbage Poriyal","Cabbage Sabzi"], expiry:7, category:"Vegetables"},
  "spinach":{emoji:"ü•¨", recipes:["Palak Paneer","Spinach Dal"], expiry:5, category:"Vegetables"},
  // Fruits
  "apple":{emoji:"üçé", recipes:["Apple Pie","Apple Halwa"], expiry:14, category:"Fruits"},
  "mango":{emoji:"ü•≠", recipes:["Mango Shake","Mango Halwa"], expiry:10, category:"Fruits"},
  "banana":{emoji:"üçå", recipes:["Banana Bread","Banana Smoothie"], expiry:7, category:"Fruits"},
  "orange":{emoji:"üçä", recipes:["Orange Juice","Orange Halwa"], expiry:7, category:"Fruits"},
  "papaya":{emoji:"ü•≠", recipes:["Papaya Halwa","Papaya Juice"], expiry:7, category:"Fruits"},
  "pomegranate":{emoji:"üçé", recipes:["Pomegranate Juice","Pomegranate Raita"], expiry:7, category:"Fruits"},
  "grapes":{emoji:"üçá", recipes:["Grape Juice","Grape Jam"], expiry:7, category:"Fruits"},
  // Dairy
  "milk":{emoji:"ü•õ", recipes:["Paneer","Kheer"], expiry:3, category:"Dairy"},
  "curd":{emoji:"ü•õ", recipes:["Curd Rice","Curd Parfait"], expiry:5, category:"Dairy"},
  "paneer":{emoji:"üßÄ", recipes:["Paneer Butter Masala","Palak Paneer"], expiry:7, category:"Dairy"},
  "butter":{emoji:"üßà", recipes:["Butter Toast","Butter Chicken"], expiry:10, category:"Dairy"},
  // Grains / Bakery
  "rice":{emoji:"üçö", recipes:["Lemon Rice","Curd Rice"], expiry:180, category:"Grains"},
  "bread":{emoji:"üçû", recipes:["Bread Upma","Bread Pakora"], expiry:3, category:"Grains"},
  "roti":{emoji:"ü•ñ", recipes:["Roti Wrap","Roti Sabzi"], expiry:3, category:"Grains"},
  // Other / Cooked dishes / leftovers
  "egg":{emoji:"ü•ö", recipes:["Egg Curry","Egg Bhurji"], expiry:5, category:"Other"},
  "chicken curry":{emoji:"üçó", recipes:[], expiry:3, category:"Other"},
  "mutton curry":{emoji:"ü•©", recipes:[], expiry:3, category:"Other"},
  "pav":{emoji:"üçî", recipes:[], expiry:2, category:"Other"},
  "sandwich":{emoji:"ü•™", recipes:[], expiry:2, category:"Other"},
  "pizza":{emoji:"üçï", recipes:[], expiry:2, category:"Other"},
  "dosa":{emoji:"ü•û", recipes:[], expiry:2, category:"Other"},
  "idli":{emoji:"üçõ", recipes:[], expiry:2, category:"Other"},
  "sambar":{emoji:"ü•£", recipes:[], expiry:2, category:"Other"},
  "rasam":{emoji:"üç≤", recipes:[], expiry:2, category:"Other"},
  "upma":{emoji:"ü•ò", recipes:[], expiry:2, category:"Other"},
  "uttapam":{emoji:"ü•û", recipes:[], expiry:2, category:"Other"}
};

const aliases = {"tomatoes":"tomato","potatoes":"potato"};

/* UI refs */
const sidebar = document.getElementById('sidebar');
const toggleMenu = document.querySelector('.toggle-menu');
const itemNameInput = document.getElementById('itemName');
const expiryInput = document.getElementById('expiryDate');
const addBtn = document.getElementById('addBtn');
const itemList = document.getElementById('itemList');
const notifBtnTop = document.getElementById('notifBtnTop');
const mainContent = document.getElementById('mainContent');
const categoriesBtn = document.getElementById('categoriesBtn');
const categorySubmenu = document.getElementById('categorySubmenu');

/* Trash */
let trash = [];

/* Toggle sidebar */
toggleMenu.addEventListener('click', ()=>{
  sidebar.classList.toggle('show');
  mainContent.classList.toggle('shift');
});

/* Toggle categories submenu */
categoriesBtn.addEventListener('click', ()=>categorySubmenu.style.display = categorySubmenu.style.display==='flex'?'none':'flex');

/* Notification */
notifBtnTop.addEventListener('click', ()=>{
  if(Notification.permission!=='granted') Notification.requestPermission();
  else{
    const notif = new Notification("FridgeMind Test", { body:"This is a test notification!", icon:"https://i.imgur.com/8QfU5Yq.png" });
    const audio = new Audio('https://www.soundjay.com/button/beep-07.wav');
    audio.play();
  }
});

/* Helpers */
function normalize(s){ return (s||"").toString().trim().toLowerCase(); }
function findPantryKeyFromLabel(label){
  if(!label) return null;
  const L = normalize(label);
  if(aliases[L]) return aliases[L];
  if(pantry[L]) return L;
  for(const key of Object.keys(pantry)){
    if(L.includes(key)) return key;
  }
  return null;
}
function daysUntil(dateStr){
  const t = new Date();
  const e = new Date(dateStr);
  return Math.ceil((e - t) / (1000*60*60*24));
}
function showToast(msg){
  const t = document.createElement('div');
  t.className='toast'; t.textContent=msg;
  document.body.appendChild(t);
  setTimeout(()=> t.remove(),2500);
}

/* Add item */
addBtn.addEventListener('click', addItem);
function addItem(){
  let raw = itemNameInput.value.trim();
  if(!raw) { showToast("Enter item name"); return; }
  let keyTry = findPantryKeyFromLabel(raw.toLowerCase()) || null;
  let expiryDays = keyTry ? pantry[keyTry].expiry : 3;
  let expiry = expiryInput.value || (()=>{ const d = new Date(); d.setDate(d.getDate()+expiryDays); return d.toISOString().split('T')[0]; })();

  const dleft = daysUntil(expiry);
  const card = document.createElement('div'); card.className='item-card';
  const info = document.createElement('div'); info.className='info';
  if(dleft<=3){ const b=document.createElement('div'); b.className='badge'; b.textContent=`‚ö†Ô∏è Near Expiry (${dleft}d)`; info.appendChild(b); 
    // Device notification
    const notifKey = keyTry || raw.toLowerCase();
    if(!localStorage.getItem('notif_'+notifKey)){ 
      if(Notification.permission==='granted'){
        new Notification("FridgeMind Alert", { body:`${raw} is near expiry!`, icon:"https://i.imgur.com/8QfU5Yq.png" });
      }
      localStorage.setItem('notif_'+notifKey,new Date().toISOString());
    }
  }
  const nameLine=document.createElement('div'); nameLine.className='name'; nameLine.textContent=raw; info.appendChild(nameLine);
  const expiryLine=document.createElement('div'); expiryLine.className='expiry'; expiryLine.textContent=`Expiry: ${expiry}`; info.appendChild(expiryLine);

  // Recipe suggestion
  if(dleft<=3 && keyTry && pantry[keyTry].recipes.length>0){
    const pool=pantry[keyTry].recipes;
    const pick=pool[Math.floor(Math.random()*pool.length)];
    const link=`https://www.youtube.com/results?search_query=${encodeURIComponent(pick+' recipe')}`;
    const s=document.createElement('div'); s.className='suggest'; s.innerHTML=`üç≥ Suggestion: <a href="${link}" target="_blank">${pick}</a>`;
    info.appendChild(s);
  }

  const delBtn=document.createElement('button'); delBtn.className='delete-btn'; delBtn.textContent='üóëÔ∏è Delete';
  delBtn.addEventListener('click', ()=>{
    card.remove(); trash.push({name:raw, expiry:expiry, key:keyTry}); showToast(`${raw} moved to Trash`);
  });

  card.appendChild(info); card.appendChild(delBtn);
  itemList.prepend(card);
  itemNameInput.value=''; expiryInput.value='';
}

/* Category filter */
categorySubmenu.querySelectorAll('button').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    const cat = btn.dataset.cat;
    [...itemList.children].forEach(c=>{
      const itemName = c.querySelector('.name').textContent.toLowerCase();
      const key = findPantryKeyFromLabel(itemName);
      if(!key) c.style.display = cat==='Other'? 'flex':'none';
      else c.style.display = pantry[key].category===cat ? 'flex' : 'none';
    });
    showToast(`Filtered by ${cat}`);
  });
});

/* Trash list */
document.getElementById('trashBtn').addEventListener('click', ()=>{
  itemList.innerHTML='';
  if(trash.length===0){ showToast("Trash is empty"); return; }
  trash.forEach(t=>{
    const card = document.createElement('div'); card.className='item-card';
    const info = document.createElement('div'); info.className='info';
    const nameLine=document.createElement('div'); nameLine.className='name'; nameLine.textContent=t.name; info.appendChild(nameLine);
    const expiryLine=document.createElement('div'); expiryLine.className='expiry'; expiryLine.textContent=`Expiry: ${t.expiry}`; info.appendChild(expiryLine);
    const restoreBtn=document.createElement('button'); restoreBtn.className='restore-btn'; restoreBtn.textContent='‚ôªÔ∏è Restore';
    restoreBtn.addEventListener('click', ()=>{
      addItemFromTrash(t); card.remove(); trash = trash.filter(x=>x!==t);
    });
    card.appendChild(info); card.appendChild(restoreBtn);
    itemList.appendChild(card);
  });
});

/* Restore helper */
function addItemFromTrash(t){
  const card = document.createElement('div'); card.className='item-card';
  const info = document.createElement('div'); info.className='info';
  const nameLine=document.createElement('div'); nameLine.className='name'; nameLine.textContent=t.name; info.appendChild(nameLine);
  const expiryLine=document.createElement('div'); expiryLine.className='expiry'; expiryLine.textContent=`Expiry: ${t.expiry}`; info.appendChild(expiryLine);
  const delBtn=document.createElement('button'); delBtn.className='delete-btn'; delBtn.textContent='üóëÔ∏è Delete';
  delBtn.addEventListener('click', ()=>{ card.remove(); trash.push(t); showToast(`${t.name} moved to Trash`); });
  card.appendChild(info); card.appendChild(delBtn);
  itemList.prepend(card);
  showToast(`${t.name} restored`);
}
</script>
</body>
</html>


